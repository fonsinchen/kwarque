<html>
    <head>
        <style type="text/css">
            * {
                background-color: black;
                color: white;
            }
            body {
                margin-left: 0;
                margin-right: 0;
                overflow: hidden;
            }
            div div.offline div.messages, div.offline div.messages div,
            div div.left div.messages, div.left div.messages div,
            div.left div.memberslist th,
            div.offline div.memberslist th {
                background-color: black;
                color: gray;
            }
            div div.status div.messages, div div.public div.messages, div div.private div.messages {
                height: 75%;
                overflow: auto;
            }
            #map, #chat {
                height:98%;
                position:absolute;
                border: 2px solid red;
            }
            .kwarqueChat {
                height: 90%;
            }
            #map {
                width:69.5%;
                left: 0.5%;
            }
            .chatInput {
                display:none;
                position:absolute;
                bottom:0;
                width:100%;
                height:2%;
            }
            .container {
                padding-right: 1%;
                padding-left: 1%;
                max-height: 75%;
                min-height: 25%;
                overflow: auto;
            }
            #chat div.chatwindow {
                border:none;
            }
            #chat {
                left:70.5%;
                width:29%;
            }
            div div._message .data {
                color:white;
            }
            div div.messages {
                background-color:black;
            }
            .chatMessage, .chatSubmit {
                position:absolute;
            }
            .chatMessage {
                width: 80%;
                left: 1%;
            }
            .chatSubmit {
                width: 17%;
                right: 1%;
            }
            #nick-space {
                padding: 1%;
            }
            #nick-space label {
                min-width: 17%;
            }
            #nick-space input {
                margin-top: 1%;
            }
            #set-nick {
                margin-left: 40%;
                width: 17%;
            }
            #nickname, #room {
                width: 80%;
            }
        </style>
        <link rel="stylesheet" type="text/css" href="css/screen.css"/>
        <link rel="stylesheet" type="text/css" href="css/mapquery.css"/>

        <script src="http://www.openlayers.org/api/OpenLayers.js"></script>
        <script src="js/socket.io.js"></script>
        <script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
        <script src="js/jquery-ui-1.8.19.custom.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="js/chat.js"></script>
        <script type="text/javascript" src="js/chatUi.js"></script>
        <script src="js/mapquery/jquery.mapquery.core.js" type="text/javascript"></script>
        <script src="js/mapquery/jquery.mapquery.popup.js" type="text/javascript"></script>
        <script src="js/mapquery/jquery.mapquery.mqPopup.js" type="text/javascript"></script>


        <script type="text/javascript">
            function initsite() {
                /*var map = new OpenLayers.Map("map");
                var mapnik = new OpenLayers.Layer.OSM();
                map.addLayer(mapnik);
                map.setCenter(new OpenLayers.LonLat(13.41,52.52) // Center of the map
                .transform(
                new OpenLayers.Projection("EPSG:4326"), // transform from WGS 1984
                new OpenLayers.Projection("EPSG:900913") // to Spherical Mercator Projection
            ), 15 // Zoom level
            );*/
                var map =$('#map').mapQuery({
                    // Add layers to your map; you need to define at least one to be able
                    // to see anything on the map
                    layers:[{
                        type:'osm'
                    }/*,{
                        type: 'JSON',
                        label: 'Polygons',
                        url: 'poly.json'
                    }*/]
                    //center : {position : [13.41,52.52], zoom : 15},
                    //projection:'EPSG:4326'
                    //maxExtent: [0, -90, 160, 90]
                });
                /*$('#popup').mqPopup({
                    map: '#map',
                    contents: function(feature) {
                        return '<p>' + feature.data.id + '</p>';
                    }
                });*/

                $("#nick-space").submit(function (e) {
                    e.preventDefault();
                    $("#nick-space").hide();
                    $(".chatInput").show();
                    $('.kwarqueChat').accChat({
                        nick : $("#nickname").val(),
                        password : ''
                    }, function() {
                        $('.kwarqueChat').accChat('openWindow', 'global');
                    });
                });
            }
        </script>
    </head>

    <body onload="initsite()">
        <div id="chat">
            <form id="nick-space" action="#">
                <label for="nickname">nick</label>
                <input name="nickname" type="text" id="nickname"/>
                <label for="room">room</label>
                <input name="room" type="text" id="room"/>
                <input type="submit" id="set-nick" value="join"/>
            </form>

            <div class="kwarqueChat"></div>
            <form class="chatInput" action="#">
                <input type="button" value="kwrq" name="submit" tabindex="2" class="chatSubmit">
                <input name="text" value="" size="50" class="chatMessage" autocomplete="off">
            </form>
        </div>
        <div id="map" class="map"></div>
        <div id="popup" class="mq-widget"></div>
    </body>
</html>
