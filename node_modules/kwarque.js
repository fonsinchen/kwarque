"use strict";

/*!
 * This file is part of kwarque.
 * Copyright(c) 2012 Ulf Hermann <ulf_hermann@gmx.net>
 * Licensed under AGPL v3, see COPYING
 */

var express = require("express");
var app = express();
var server = require('http').createServer(app)


app.configure(function () {
    app.set('view options', {layout: false});
    app.use(express.methodOverride());
    app.use(express.bodyParser());
    app.use(express["static"](__dirname + '/../public'));
    app.use(express.errorHandler({
        dumpExceptions: true,
        showStack: true
    }));
    app.use(app.router);
});

app.get("/", function (req, res) {
    res.render(__dirname + "/../public/index.html");
});

if (typeof Object.create !== 'function') {
    Object.create = function (obj) {
        var F = function() {};
        F.prototype = obj;
        return new F();
    };
}

module.exports = Object.create(require('events').EventEmitter.prototype);
module.exports.app = app;
module.exports.server = server;
module.exports.noop = function() {};


